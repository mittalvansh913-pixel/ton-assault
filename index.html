<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TON ASSAULT</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0f2027;color:#fff;text-align:center}
.hidden{display:none}
.card{background:#203a43;margin:12px;padding:15px;border-radius:12px}
button{padding:14px 24px;border:none;border-radius:12px;background:#ff9800;font-weight:bold}
.small{font-size:13px;color:#ccc}

/* loading */
#loading{position:fixed;inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center}
.logo{font-size:40px;color:#ff9800;animation:pulse 1.4s infinite}
@keyframes pulse{50%{transform:scale(1.1)}}
</style>
</head>

<body>

<div id="loading">
  <div class="logo">TON ASSAULT</div>
  <p class="small">Loading Game...</p>
</div>

<div id="game" class="hidden">
  <h2>ğŸ’° TON ASSAULT</h2>

  <div class="card">
    ğŸª™ Coins: <b id="coins">0</b><br>
    âš¡ Energy: <b id="energy">10</b>/10<br>
    â­ Level: <b id="level">1</b>
  </div>

  <button onclick="tap()">TAP TO EARN</button>

  <div class="card">
    <h3>ğŸ¥ Watch Ad</h3>
    <button onclick="watchAd()">WATCH AD (+Energy)</button>
  </div>

  <div class="card">
    <h3>ğŸ Daily Reward</h3>
    <button onclick="daily()">CLAIM</button>
    <p class="small" id="dailyMsg"></p>
  </div>

  <div class="card">
    <h3>ğŸ¡ Spin & Win</h3>
    <button onclick="spin()">SPIN</button>
    <p class="small" id="spinMsg"></p>
  </div>

  <div class="card">
    <h3>ğŸ“‹ Tasks</h3>
    <p class="small">Watch 2 ads â†’ +20 coins</p>
    <p class="small">Tap 20 times â†’ +20 coins</p>
  </div>

  <div class="card">
    <h3>ğŸ‘¥ Referral</h3>
    <p class="small">Invite friends (demo)</p>
    <button onclick="ref()">INVITE</button>
  </div>

  <div class="card">
    <h3>ğŸ’¸ Withdraw</h3>
    <p class="small">Min 2 coins | Fee 50%</p>
    <button onclick="withdraw()">WITHDRAW</button>
  </div>

  <p id="msg"></p>
</div>

<script>
const tg=window.Telegram?.WebApp;
if(tg){tg.expand();tg.ready();}

let coins=0,energy=10,level=1;
let taps=0,ads=0;
let lastDaily=localStorage.getItem("daily")||0;

// loading fix
document.addEventListener("DOMContentLoaded",()=>{
 setTimeout(()=>{
  loading.style.display="none";
  game.classList.remove("hidden");
 },1500);
});

function update(){
 coinsEl.textContent=coins;
 energyEl.textContent=energy;
 levelEl.textContent=level;
}
const coinsEl=coins,energyEl=energy,levelEl=level;

function tap(){
 if(energy<=0){msg.textContent="âš¡ Energy empty!";return;}
 energy--; coins+=level; taps++;
 if(taps%20==0){coins+=20;}
 checkLevel(); update();
}

function watchAd(){
 ads++; energy=Math.min(10,energy+5);
 if(ads%2==0){coins+=20;}
 msg.textContent="ğŸ¥ Ad watched!";
 update();
}

function daily(){
 const now=Date.now();
 if(now-lastDaily<86400000){
  dailyMsg.textContent="Come tomorrow!";
  return;
 }
 coins+=50;
 lastDaily=now;
 localStorage.setItem("daily",now);
 dailyMsg.textContent="âœ… 50 coins added!";
 update();
}

function spin(){
 const rewards=[5,10,20,50];
 const r=rewards[Math.floor(Math.random()*rewards.length)];
 coins+=r;
 spinMsg.textContent="ğŸ‰ You won "+r+" coins";
 update();
}

function ref(){
 coins+=30;
 msg.textContent="ğŸ‘¥ Friend joined! +30 coins (demo)";
 update();
}

function withdraw(){
 if(coins<2){alert("Min withdraw 2");return;}
 const fee=coins*0.5;
 alert("Withdraw\nCoins:"+coins+"\nFee:"+fee);
 coins=0; update();
}

function checkLevel(){
 if(coins>=level*50){level++;}
}
</script>

</body>
    </html>
