<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zombie Fighter</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(#2b1055,#1a043a);
  color:#fff;
  text-align:center;
}
.hidden{display:none}
.container{max-width:420px;margin:auto;padding:15px}
.top{background:rgba(0,0,0,0.4);border-radius:12px;padding:12px;margin-bottom:10px;display:flex;justify-content:space-between}
.stat{font-weight:bold}
.bar{background:#444;border-radius:8px;overflow:hidden;height:10px}
.bar div{height:100%}
.game{background:rgba(0,0,0,0.4);border-radius:12px;padding:20px;margin-bottom:10px}
.fighters{display:flex;justify-content:space-between;font-size:48px}
button{padding:14px;border:none;border-radius:10px;font-weight:bold;cursor:pointer}
.attack{background:#e53935;color:#fff}
.heal{background:#43a047;color:#fff}
.shopbtn{background:#ff9800;color:#000;width:100%}
.earnbtn{background:#1e88e5;color:#fff;width:100%}
#toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#000;padding:10px 20px;border-radius:20px;opacity:0;transition:.3s}
#toast.show{opacity:1}
</style>
</head>

<body>
<div class="container">

<div class="top">
  <div class="stat">â­ <span id="level">1</span></div>
  <div class="stat">ğŸ’° <span id="coins">0</span></div>
  <div class="stat">ğŸ’ <span id="gems">0</span></div>
</div>

<div>
â¤ï¸ HP <span id="hp">100</span>/<span id="hpmax">100</span>
<div class="bar"><div id="hpbar" style="width:100%;background:red"></div></div>
</div>

<div class="game">
  <div class="fighters">
    ğŸ¦¸â€â™‚ï¸ âš”ï¸ ğŸ§Ÿ
  </div>
  <div id="zhp">30/30</div>
  <div class="bar"><div id="zbar" style="width:100%;background:green"></div></div>
</div>

<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
<button class="attack" onclick="attack()">Attack</button>
<button class="heal" onclick="heal()">Heal (20ğŸ’°)</button>
</div>

<button class="earnbtn" onclick="watchAd()">ğŸ“º Watch Ad (+20ğŸ’°)</button>
<button class="shopbtn" onclick="convert()">ğŸ’± 100ğŸ’° â†’ 1ğŸ’</button>
<button class="shopbtn" onclick="withdraw()">ğŸ¦ Withdraw</button>

</div>

<div id="toast"></div>

<script>
let player={hp:100,max:100,coins:0,gems:0,level:1,damage:10,exp:0};
let zombie={hp:30,max:30,damage:5};
let lastAttack=0,lastAd=0;

/* SAVE */
function save(){localStorage.setItem("zf",JSON.stringify(player))}
function load(){let d=localStorage.getItem("zf");if(d)player=JSON.parse(d)}

function update(){
coins.textContent=player.coins;
gems.textContent=player.gems;
level.textContent=player.level;
hp.textContent=player.hp;
hpmax.textContent=player.max;
hpbar.style.width=(player.hp/player.max*100)+"%";
zhp.textContent=zombie.hp+"/"+zombie.max;
zbar.style.width=(zombie.hp/zombie.max*100)+"%";
save();
}

/* GAME */
function spawn(){
zombie.max=30+player.level*10;
zombie.hp=zombie.max;
zombie.damage=5+player.level*2;
toastMsg("ğŸ§Ÿ Zombie Spawned");
}

function attack(){
let now=Date.now();
if(now-lastAttack<400){toastMsg("â›” Slow down");return;}
lastAttack=now;

zombie.hp-=player.damage;
if(zombie.hp<=0){
player.coins+=10;
player.exp+=20;
spawn();
}else setTimeout(()=>{player.hp-=zombie.damage},300);

levelUp();
update();
}

function heal(){
if(player.coins<20)return toastMsg("No coins");
player.coins-=20;
player.hp=Math.min(player.max,player.hp+30);
update();
}

function levelUp(){
if(player.exp>=player.level*100){
player.exp=0;player.level++;
player.max+=20;player.hp=player.max;player.damage+=5;
toastMsg("â­ Level Up");
}
}

/* EARNING FLOW */
function watchAd(){
let now=Date.now();
if(now-lastAd<30000)return toastMsg("â³ Wait 30s");
lastAd=now;
player.coins+=20;
toastMsg("ğŸ“º Ad Reward +20ğŸ’°");
update();
}

function convert(){
if(player.coins<100)return toastMsg("Need 100 coins");
player.coins-=100;
player.gems+=1;
toastMsg("ğŸ’ Converted");
update();
}

function withdraw(){
if(player.coins<200)return toastMsg("Min 200 coins");
let receive=Math.floor(player.coins*0.5);
toastMsg("ğŸ¦ Withdraw request: "+receive+"ğŸ’° (Demo)");
player.coins-=receive;
update();
}

/* PASSIVE INCOME */
setInterval(()=>{player.coins+=1;update()},10000);

function toastMsg(t){
toast.textContent=t;
toast.classList.add("show");
setTimeout(()=>toast.classList.remove("show"),1500);
}

load();spawn();update();
</script>
</body>
</html>
