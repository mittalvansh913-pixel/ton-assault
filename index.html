<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TON ASSAULT</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f2027;
  color:#fff;
  text-align:center;
}
.hidden{display:none}

/* LOADING */
#loading{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.logo{
  font-size:42px;
  font-weight:bold;
  color:#ff9800;
  animation:pulse 1.5s infinite;
}
@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.1)}
  100%{transform:scale(1)}
}
.loader{
  margin-top:20px;
  width:200px;
  height:10px;
  background:#333;
  border-radius:10px;
  overflow:hidden;
}
.loader div{
  height:100%;
  width:0%;
  background:#ff9800;
  animation:load 2s forwards;
}
@keyframes load{
  to{width:100%}
}

/* GAME UI */
.container{
  padding:25px;
}
.card{
  background:#203a43;
  border-radius:14px;
  padding:15px;
  margin:15px 0;
}
button{
  padding:15px 25px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:#ff9800;
  font-weight:bold;
}
button:active{transform:scale(0.95)}
.small{
  font-size:14px;
  color:#ccc;
}
</style>
</head>

<body>

<!-- LOADING SCREEN -->
<div id="loading">
  <div class="logo">TON ASSAULT</div>
  <div class="small">Loading Game...</div>
  <div class="loader"><div></div></div>
</div>

<!-- GAME -->
<div id="game" class="hidden container">

  <h1>üí∞ TON ASSAULT</h1>
  <p class="small">Tap ‚Ä¢ Watch Ads ‚Ä¢ Earn</p>

  <div class="card">
    ü™ô Coins: <b><span id="coins">0</span></b><br>
    ‚≠ê Level: <b><span id="level">1</span></b>
  </div>

  <button onclick="tap()">TAP TO EARN</button>

  <div class="card">
    <h3>üé• Watch Ad</h3>
    <p class="small">Watch a short ad and earn coins</p>
    <button onclick="watchAd()">WATCH AD</button>
  </div>

  <div class="card">
    <p>Minimum Withdraw: 2 Coins</p>
    <p>Withdraw Fee: 50%</p>
    <button onclick="withdraw()">WITHDRAW</button>
  </div>

  <p id="msg"></p>
</div>

<script>
const tg = window.Telegram?.WebApp;
if(tg){ tg.expand(); tg.ready(); }

let coins = 0;
let level = 1;
let nextLevel = 20;

// fake loading
setTimeout(()=>{
  document.getElementById("loading").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
},2000);

function update(){
  document.getElementById("coins").innerText = coins;
  document.getElementById("level").innerText = level;
}

function tap(){
  coins += level;
  checkLevel();
  update();
}

function watchAd(){
  document.getElementById("msg").innerText = "üé• Watching Ad...";
  setTimeout(()=>{
    const reward = 10 + level*2;
    coins += reward;
    document.getElementById("msg").innerText =
      "‚úÖ Ad Completed! +" + reward + " coins";
    checkLevel();
    update();
  },2000);
}

function checkLevel(){
  if(coins >= nextLevel){
    level++;
    nextLevel += level*20;
    document.getElementById("msg").innerText =
      "üî• Level Up! Level " + level;
  }
}

function withdraw(){
  if(coins < 2){
    alert("Minimum withdraw is 2 coins");
    return;
  }
  const fee = coins*0.5;
  const receive = coins-fee;
  alert(
    "Withdraw Requested\n\nCoins: "+coins+
    "\nFee (50%): "+fee+
    "\nYou Receive: "+receive
  );
  coins = 0;
  update();
}
</script>

</body>
</html>
